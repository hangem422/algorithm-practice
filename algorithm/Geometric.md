# 기하 알고리즘

## 점과 직선의 거리

A(x~1~, y~1~)에서 직선 ax + by + c = 0까지 최단거리(수직 거리) 구하기

## 1. 직선의 방정식 구하기

A(x~1~, y~1~)과 직선 위의 임의의 점 B(x~2~, y~2~)의 직선의 방정식을 구합니다.

1. 직선의 방정식을 y = a\`x + b\`라고 할때 A(x~1~, y~1~)과 B(x~2~, y~2~)를 대입해서 기울기 a\`를 구합니다.
   - y~1~ = a\`x~1~ + b
   - y~2~ = a\`x~2~ + b
   - y~1~ - a\`x~1~ = y~2~ - a\`x~2~
   - a = (y~2~ - y~1~) / (x~2~ - x~1~)

## 2. 기울기 곱하기

두 직선의 방정식은 수직이기 때문에 기울기를 곱하면 -1이 나옵니다.

1. 첫번째 방정식 기울기 구하기
   - ax + by + c = 0
   - by = -ax - c
   - y = -(a / b) \* x - c
2. 기울기 곱하기
   - (y~2~ - y~1~) / (x~2~ - x~1~) \* -(a / b) = -1
   - (y~2~ - y~1~) / (x~2~ - x~1~) \* (a / b) = 1
   - a \* (y~2~ - y~1~) = b \* (x~2~ - x~1~)
   - (y~2~ - y~1~) / b = (x~2~ - x~1~) / a = k
   - a \* k = x~2~ - x~1~
   - b \* k = y~2~ - y~1~
   - x~2~ = a \* k + x~1~
   - y~2~ = b \* k + y~1~

## 3. B(x~2~, y~2~)를 ax + by + c = 0에 대입

B(x~2~, y~2~)는 ax + by + c = 0위에 있는 점이기도 합니다.

1. B(x~2~, y~2~)를 ax + by + c = 0에 대입
   - a \* x~2~ + b\ \* y~2~ + c = 0
2. 기울기로 구한 임의의 k값 대입
   - a \* (a \* k + x~1~) + b \* (b \* k + y~1~) + c = 0
   - (a^2^ + b^2^) \* k + a \* x~1~ + b \* y~1~ + c = 0
   - k = -(a \* x~1~ + b \* y~1~ + c) / (a^2^ + b^2^)

## 4. A(x~1~, y~1~)과 B(x~2~, y~2~) 거리 구하기

1. 삼각함수로 거리 구하기
   - sqrt((x~2~ - x~1~)^2^ + (y~2~ - y~1~)^2^)
2. 기울기로 구한 임의의 k값 대입
   - sqrt((a \* k)^2^ + (b \* k)^2^)
   - sqrt(k^2^ \* (a^2^ + b^2^))
   - |k| \* sqrt(a^2^ + b^2^)
3. 직선의 방정식으로 구한 k값 대입
   - |(a \* x~1~ + b \* y~1~ + c) / (a^2^ + b^2^)| \* sqrt(a^2^ + b^2^)
   - |(a \* x~1~ + b \* y~1~ + c)| / (a^2^ + b^2^) \* sqrt(a^2^ + b^2^)
   - |(a \* x~1~ + b \* y~1~ + c)| / sqrt(a^2^ + b^2^)

```javascript
function solution(x1, y1, a, b, c) {
  const num = Math.abs(a * x1 + b * y1 + c);
  const den = Math.sqrt(a ** 2 + b ** 2);

  return den / num;
}
```

## 세 점의 넓이

A(x~1~, x~2~), B(x~2~, y~2~), C(x~3~, y~3~)이 주어졌을 때 삼각형의 넓이를 구하기

### 1. B(x~2~, y~2~)와 C(x~3~, y~3~)의 직선의 방정식을 구합니다.

1. 기울기 구하기
   - a = (y~3~ - y~2~) / (x~3~ - x~2~)
2. 다시 A(x~2~, y~2~)을 대입해서 상수 값 구합니다.
   - y~2~ = (y~3~ - y~2~) / (x~3~ - x~2~) \* x~2~ + b
   - b = y~2~ - (y~3~ - y~2~) / (x~3~ - x~2~) \* x~2~
3. a\`와 b\`를 이용해서 방정식을 다시 정리합니다.
   - y = (y~3~ - y~2~) / (x~3~ - x~2~) \* x + y~2~ - (y~3~ - y~2~) / (x~3~ - x~2~) \* x~2~
   - y - y~2~ = (y~3~ - y~2~) / (x~3~ - x~2~) \* (x - x~2~)
4. ax + by + c = 0의 형태로 봤을 때 각 변수는 다음과 같습니다.
   - (y - y~2~) \* (x~3~ - x~2~) = (y~3~ - y~2~) \* (x - x~2~)
   - x~3~ \* y - x~2~ \* y - x~3~ \* y~2~ = x \* y~3~ - x~2~ \* y~3~ - x \* y~2~
   - (y~3~ - y~2~) \* x - (x~3~ - x~2~) \* y - x~2~ \* y~3~ + x~3~ \* y~2~ = 0
   - a = y~3~ - y~2~
   - b = -(x~3~ - x~2~)
   - c = -(x~2~ \* y~3~ - x~3~ \* y~2~)

### 2. A(x~1~, y~1~)과 직선의 방정식 사이의 최단 거리를 구합니다.

1. 점과 직선의 방정식 사이의 거리 구하기 공식을 사용합니다.
   - |(a \* x~1~ + b \* y~1~ + c)| / sqrt(a^2^ + b^2^)

### 3. B(x~2~, y~2~)와 C(x~3~, y~3~) 사이의 거리를 구합니다.

1. 삼각 함수를 상용합니다.
   - d = sqrt((x~3~ - x~2~)^2^ \* (y~3~ - y~2~)^2^)
2. a와 b를 대입합니다.
   - d = sqrt(a^2^ + b^2^)

### 4. 삼각형의 넓이를 구합니다.

1. 밑변과 높이를 곱한 후 2로 나눕니다.
   - |(a \* x~1~ + b \* y~1~ + c)| / sqrt(a^2^ + b^2^) \* sqrt(a^2^ + b^2^) / 2
   - |(a \* x~1~ + b \* y~1~ + c)| / 2
2. a와 b의 값을 대입합니다.
   - |((y~3~ - y~2~) \* x~1~ + -(x~3~ - x~2~) \* y~1~ - x~2~ \* y~3~ + x~3~ \* y~2~)| / 2

```javascript
function solution(x1, y1, x2, y2, x3, y3) {
  const num = (y3 - y2) * x1 + -(x3 - x2) * y1 - x2 * y3 + x3 * y2;
  return Math.abs(num) / 2;
}
```

## CCW

A(x~1~, y~1~), B(x~2~, y~2~), C(x~3~, y~3~)가 반시계방향이면 `1`, 직선이면 `0`, 시계방향이면 `-1` 반환.

### 1. A(x~1~, y~1~) - B(x~2~, y~2~) 직선의 방정식 구하기

- y = (y~2~ - y~1~) / (x~2~ - x~1~) \* (x - x~1~) + y~1~

### 2. 직선의 방정식에 C(x~3~, y~3~) 대입하기

#### 2.1. x~2~ - x~1~ 값이 음수인 경우 (직선 방향이 왼쪽인 경우)

- y~3~ - y~1~ < (y~2~ - y~1~) / (x~2~ - x~1~) \* (x~3~ - x~1~) (시계 방향)
- y~3~ - y~1~ = (y~2~ - y~1~) / (x~2~ - x~1~) \* (x~3~ - x~1~) (직선 방향)
- y~3~ - y~1~ > (y~2~ - y~1~) / (x~2~ - x~1~) \* (x~3~ - x~1~) (반시계 방향)

#### 2.2. x~2~ - x~1~ 값이 양수인 경우 (직선 방향이 오른쪽인 경우)

- y~3~ - y~1~ < (y~2~ - y~1~) / (x~2~ - x~1~) \* (x~3~ - x~1~) (반시계 방향)
- y~3~ - y~1~ = (y~2~ - y~1~) / (x~2~ - x~1~) \* (x~3~ - x~1~) (직선 방향)
- y~3~ - y~1~ > (y~2~ - y~1~) / (x~2~ - x~1~) \* (x~3~ - x~1~) (시계 방향)

#### 2.3. 두 경우 통일 시키기

x~2~ - x~1~ 값이 양수냐 음수냐에 따라 부등호의 결과가 반대이므로, x~2~ - x~1~를 양쪽에 곱해서 부등호를 통일시킵니다. x~2~ - x~1~이 양수일 때는 곱해도 부등호가 유지되고, x~2~ - x~1~가 음수일 경우 곱하면 부등호가 뒤집히는 것을 이용합니다.

- (y~3~ - y~1~) \* (x~2~ - x~1~) < (y~2~ - y~1~) \* (x~3~ - x~1~) (반시계 방향)
- (y~3~ - y~1~) \* (x~2~ - x~1~) = (y~2~ - y~1~) \* (x~3~ - x~1~) (직선 방향)
- (y~3~ - y~1~) \* (x~2~ - x~1~) > (y~2~ - y~1~) \* (x~3~ - x~1~) (시계 방향)

```javascript
function solution(x1, y1, x2, y2, x3, y3) {
  const num1 = (y3 - y1) * (x2 - x1);
  const num2 = (y2 - y1) * (x3 - x1);

  if (num1 < num2) return "-1";
  if (num1 > num2) return "1";
  return "0";
}
```
